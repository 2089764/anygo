{
  "name": "webot-cli",
  "version": "0.0.4",
  "description": "Command line interface for weixin-robot",
  "main": "index.js",
  "repository": {
    "type": "git",
    "url": "https://github.com/node-webot/webot-cli.git"
  },
  "dependencies": {
    "colors": "~0.6.0",
    "xml2js": "~0.2.6",
    "commander": "~1.1.1",
    "prettyjson": "~0.8.1",
    "request": "~2.16.6",
    "lodash": "~1.1.1",
    "nopt": "~2.1.1"
  },
  "devDependencies": {},
  "bin": {
    "webot": "bin/webot"
  },
  "keywords": [
    "weixin",
    "webot",
    "cli",
    "wechat"
  ],
  "author": {
    "name": "Jesse Yang",
    "email": "kissmud@gmail.com"
  },
  "license": "MIT",
  "readme": "# webot-cli\n\nCommand line interface for [weixin-robot](https://github.com/node-webot/weixin-robot).\n\n    npm install webot-cli -g\n\n## Commands\n\n```man\n  Usage: webot <command> [options]\n\n  Options:\n\n    -h, --help     output usage information\n    -V, --version  output the version number\n\n  Commands:\n\n    send [image|text|loc|..]   send a message to test host\n    menu [create|delete|get]   manipulate wechat menu\n    help [command]             view help info for specified command\n```\n\nUse `webot help` for more details.\n\n## 发送测试消息\n\n```man\n  Usage: webot send [type] [options] [message]\n\n  Types:\n\n    # t, text            Send text messages (default)\n    # i, image, pic      Send image messages\n    # l, loc, location   Send location messages\n    # e, event           Send event messages\n\n  Options:\n\n    --token          API token for wechat, defaults to `process.env.WX_TOKEN`\n    --port           The port your service is listening at, defaults to `process.env.PORT`\n    --host           Server hostname, defaults to 127.0.0.1\n    --route          The subdirectory you are watching\n    --des            Request destination, a full url\n                     Will override host, port and route\n    --user           FromUserName of this message.\n\n  Examples:\n\n    webot send --token abc123 --des http://example.com/webot\n    webot send t Hello\n    webot send loc 20.12 120.33 \"Somewhere Out There\"\n```\n\n## 微信自定义菜单\n\n    webot help menu\n\n需要一个 json 文件保存 access_token 等配置信息（默认是当前目录的 **wx_config.json**）。\n为安全起见，建议你只在本地使用此文件，不要把它放到代码仓库中。\n\n```javascript\n{\n  \"appid\": \"abcedfe123456\",\n  \"secret\": \"abcdefghijklmn1234567890\"\n}\n```\n\n### 创建或修改\n\n按照微信文档中的[请求示例][1]，新建一个 json 文件（如`menu.json`），然后利用 stdin 传入 `webot menu create` 命令：\n\n文件 **menu.json** 的内容：\n\n```javascript\n {\n     \"button\":[\n     {  \n          \"type\":\"click\",\n          \"name\":\"今日歌曲\",\n          \"key\":\"V1001_TODAY_MUSIC\"\n      },\n      {\n           \"type\":\"click\",\n           \"name\":\"歌手简介\",\n           \"key\":\"V1001_TODAY_SINGER\"\n      },\n      {\n           \"name\":\"菜单\",\n           \"sub_button\":[\n            {\n               \"type\":\"click\",\n               \"name\":\"hello word\",\n               \"key\":\"V1001_HELLO_WORLD\"\n            },\n            {\n               \"type\":\"click\",\n               \"name\":\"赞一下我们\",\n               \"key\":\"V1001_GOOD\"\n            }]\n       }]\n }\n```\n\n执行命令：\n\n    webot menu create --config wx_config.json < menu.json\n\n### 自定义菜单与 webot 的结合\n\n发送文字消息或者触发点击事件都可以：\n\n```\nvar reg_gequ = /(今日歌曲|today music)/i;\n\nwebot.set('today_music', {\n  pattern: function(info) {\n    return reg_gequ.test(info.text) || info.param.eventKey === 'V1001_TODAY_MUSIC';\n  },\n  handler: function(info, cb) {\n    // 从你的数据库里查找今日歌曲\n    cb(null, {\n      type: 'music',\n      musicUrl: 'http://xxxx...',\n      hqMusicUrl: 'http://xxxx...'\n    });\n  },\n});\n```\n\n## LICENCE\n\n(the MIT licence)\n\n[1]:http://mp.weixin.qq.com/wiki/index.php?title=%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8F%9C%E5%8D%95%E6%8E%A5%E5%8F%A3#.E8.8F.9C.E5.8D.95.E5.88.9B.E5.BB.BA)\n",
  "_id": "webot-cli@0.0.4",
  "dist": {
    "shasum": "3dae60b43eaf6b05960e53c9487cebc2aab471ac"
  },
  "_from": "webot-cli"
}
